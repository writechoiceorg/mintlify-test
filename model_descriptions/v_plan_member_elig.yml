version: 2

models:
  - name: v_plan_member_elig
    description: > 
        This table contains information about member enrollment in health plans. Each record in this table relates to a specific member and product ID and date range (bound by start and end dates) during which the member is enrolled in the product. This data drives a range of Arcadia Analytics functionality, including security settings for plan users, constraining the list of members whose information they may view to those with current eligibility in their plan.
    data_tests:
      - not_empty:
          meta:
            requirement: [ 'FDR-1849' ]
    columns:
      - name: person_id
        description: >
          QDW person ID for the person whose monthly eligibility is represented in this row. 
      - name: member_elig_id
        description: >
          ID of the member eligibility row.
      - name: member_id
        description: >
          Member ID for the member whose eligibility is described in this row.
      - name: orig_member_id
        description: >
          Member ID, as specified in the plan data source, of the member to whom this capitation payment applies.  
      - name: product_id
        description: >
          Product ID of the plan product in which the member is enrolled for this eligibility period.
      - name: orig_product_id
        description: >
          Product ID, as specified in the plan data source, of the plan product to which this capitation payment applies.
      - name: group_id
        description: >
          Group ID of the group to which the member belongs for this eligibility period.
      - name: orig_group_id
        description: >
          ID of the group row in the Staging database, used to tie back to the plan data source.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from plan data source column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.
      - name: mbr_no
        description: >
          Policy number suffix for the member. When multiple family members are covered under the same policy,
          the suffix values are used to identify the specific family member to whom the coverage applies.  Values are
          typically two digits with leading zeroes. In general, a suffix value of '01' suggests that this member is
          the subscriber, and suffix values other than '01' represent family members of the subscriber. If the mbr_no
          column already includes the suffix, then it should not be repeated in this column.
      - name: mbr_no_suffix
        description: >
          Policy number suffix for the member. When multiple family members are covered under the same policy,
          the suffix values are used to identify the specific family member to whom the coverage applies.
          Values are typically two digits with leading zeroes. In general, a suffix value of '01' suggests that
          this member is the subscriber, and suffix values other than '01' represent family members of the subscriber.
          If the mbr_no column already includes the suffix, then it should not be repeated in this column.
      - name: start_date_unscrubbed
        description: >
          Eligibility effective date, the date and time when the eligibility period went (or will go) into effect.
      - name: start_date
        description: >
          Eligibility effective date, the date and time when the eligibility period went (or will go) into effect.
          Added in Arcadia v6 schema.
      - name: end_date_unscrubbed
        description: >
          Eligibility termination date, the date and time when the eligibility period ended (or will end).
      - name: end_date
        description: >
          Eligibility termination date, the date and time when the eligibility period ended (or will end).
          If end_date is NULL, it means that the end of the eligibility period is presumed to be continuous
          in the future, i.e. from now until the end of time. Added in Arcadia v6 schema.
      - name: term_code_unscrubbed
        description: >
          Code indicating the reason for termination of eligibility. This value is scrubbed into the term_code column.
      - name: term_code
        description: >
          Code indicating the reason for termination of eligibility. This value is derived from the
          term_code_unscrubbed column. Arcadia has not defined a list of valid codes for this column.
          Added in Arcadia v6 schema.
      - name: pregnancy_ind
        description: >
          Indicates if the member is pregnant. This means the member became eligible for this segment due to pregnancy.
          For example, under certain conditions a woman may become eligible for Medicaid coverage during pregnancy.
      - name: subscriber_only_ind
        description: >
          Indicates if coverage for the subscriber only.  Valid values are 'Y' (coverage is for the subscriber only)
          and 'N' (coverage is for other people in addition to the subscriber).
      - name: medicare_a_ind
        description: >
          Indicates if the member has Medicare Part A eligibility under this product during this eligibility period.
          Valid values are 'Y' (member has Medicare Part A eligibility) and 'N' (member does not have Medicare Part A
          eligibility). If the line of business for this product is Medicare then this indicator is required; otherwise
          it can be left.
      - name: medicare_b_ind
        description: >
          Indicates if the member has Medicare Part B eligibility under this product during this eligibility period.
          Valid values are 'Y' (member has Medicare Part B eligibility) and 'N' (member does not have Medicare Part B
          eligibility).  If the line of business for this product is Medicare then this indicator is required; otherwise
          it can be left .
      - name: pcp_copay_amount
        description: >
          Amount the member is expected to pay as copay for visits to the primary care provider during this eligibility
          period. This amount is set by the payor in advance based on the benefits of the specific plan.
      - name: deductible_amount
        description: >
          Amount the member must pay out of pocket before insurance coverage begins. This amount is set by the payer
          in advance based on the benefits of the specific plan.
      - name: re_cert_date
        description: >
          Date on which the member is next due to re-certify their eligibility.
      - name: seq_no
        description: >
          Coverage order. Values are integers such as 1 (This is the primary policy) 2(this is the secondary policy)
          , etc.
      - name: other_coverage_int_ind
        description: >
          Indicates if, during this eligibility period, the member has other coverage besides this one that is
          'internal', meaning it is provided  by the same payor. Values are 'Y' (member has other internal coverage)
          and 'N' (member does not have other internal coverage).
      - name: other_coverage_ext_ind
        description: >
          Indicates if, during this eligibility period, the member has other coverage besides this one that is
          'external', meaning it is provided  by a different payer. Values are 'Y' (member has other external coverage)
          and 'N' (member does not have other external coverage). This is used for documented third-party liability.
      - name: drug_coverage_ind_unscrubbed
        description: >
          Indicates if the member has prescription coverage under this product during this eligibility period.
          This value is scrubbed into the drug_coverage_ind column.
      - name: drug_coverage_ind
        description: >
          Indicates if the member has prescription coverage under this product during this eligibility period.
          Valid values are 'Y' (does have prescription coverage) and 'N' (does not have prescription coverage).
          This value is derived from the drug_coverage_ind_unscrubbed column. Added in Arcadia v6 schema.
      - name: premium_amount
        description: >
          Monthly member premium amount during this eligibility period.  The logic to calculate the total premium
          amount for an eligibility period will multiply this value  by the number of months of eligibility.
      - name: orig_source_id
        description: >
          QDW source ID in character format of the plan data source from which this record was obtained.
      - name: source_id
        description: >
          ID for the data source from which this record was obtained.
      - name: orig_member_elig_id
        description: >
          ID of the member eligibiility row in the Staging database, used to tie back to the plan data source.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from plan data source column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.
      - name: insert_timestamp
        description: >
          Date and time when the row was first inserted into the QDW.
      - name: update_timestamp
        description: >
          Date and time when the row was last updated in the QDW.
      - name: create_timestamp
        description: >
          Date and time when the record was first created.
      - name: modify_timestamp
        description: >
          Date and time when the record was last updated.
      - name: created_by
        description: >
          User who first inserted the row into the plan data source, as specified by a user ID known to
          the plan data source.
      - name: modified_by
        description: >
          User who most recently updated the row in the plan data source, as specified by a user ID
          known to the plan data source.
      - name: delete_ind
        description: >
          Indicates if the record is marked as deleted, either because it was deleted in the plan data source,
          or because data transformation logic changed in a way that makes the record no longer valid.
          Values are 'Y'/'1' (deleted) and 'N'/'0' (not deleted).
      - name: loaded_from_file
        description: >
          Name of the file from which this particular record was first loaded, usually a CSV file.
      - name: risk_cohort
        description: >
          Associated Risk Cohort for Risk Calculation
      - name: subscriber_id
        description: >
          Subscriber ID of the person who carries the insurance. This may be either the patient or a relative.  For example, if a patient is covered under a spouse's insurance plan, this number represents the spouse.
      - name: orig_subscriber_id
        description: >
          The identifier assigned by the health insurance payer to the subscriber, i.e. the person who carries the insurance.  This may be either the patient or a relative.  For example, if a patient is covered under a spouse's insurance plan, this number represents the spouse.
      - name: relationship
        description: >
          Relationship of the member to the person who is the subscriber named in the health insurance coverage.  Example values are 'Child', 'Spouse', 'Subscriber'.  This value is derived from relationship_unscrubbed based on mapping in the lookup.plan_relationship table in Staging.  Arcadia has not defined a list of valid codes for this column.  It may be populated in whatever way is useful to the client.