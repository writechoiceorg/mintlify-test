version: 2

models:
  - name: carePlans
    description: >
     This table contains a record for each care goal/intervention added to a patient's care plan. Timestamps for all goal and intervention status updates as well as assignee contact information are included in each record for efficient workflow analysis
    config:
      tags: [ 'care_management' ]
      frequencyDomain: 'CARE MANAGEMENT'
    data_tests:
      - not_empty:
          meta:
            requirement: [ 'FDR-1064' ]
      - has_rls:
          meta:
            requirement: [ 'ETL-1239' ]
    columns:
      - name: personId
        description: >
          Arcadia's universal identifier for the
          patient/member record. This identifier is
          subject to change over time.
        data_tests:
          - not_null:
              meta:
                requirement: [ 'FDR-1064' ]
      - name: carePlanId
        description: >
          Arcadia's internal identifier for the care plan.
      - name: goalId
        description: >
          Arcadia's internal identifier for the care goal.
      - name: carePlanGoalId
        description: >
          Numeric identifier for the instance of the care
          goal in the care plan.
      - name: goalTitle
        description: >
          Title of the care goal.
      - name: goalAssigneeId
        description: >
          Arcadia's internal identifier for the user to
          whom the care goal is assigned.
      - name: goalAssignee
        description: >
          Assigned user's full name (Last, First).
      - name: goalAddedTimestamp
        description: >
          Date and time the goal was added to the care
          plan.
      - name: goalAssignedTimestamp
        description: >
          Date and time the goal was assigned.
      - name: goalCompletedTimestamp
        description: >
          Date and time the goal was completed.
      - name: goalOptOutDate
        description: >
          Date and time the goal was marked opted out.
      - name: goalInactiveDate
        description: >
          Date and time the goal was marked inactive.
      - name: interventionId
        description: >
          Numeric identification of the intervention.
        data_tests:
          - relationships:
              to: ref('carePlansInterventionType_tmp')
              field: interventionId
              meta:
                requirement: [ 'FDR-1064' ]
      - name: carePlanInterventionId
        description: >
          Numeric identifier of the instance of the
          intervention in the care plan.
      - name: interventionTitle
        description: >
          Brief description of intervention.
      - name: interventionType
        description: >
          The scheduling type of the task: "One-time" or
          "Recurring."
        data_tests:
          - accepted_values:
              values: [ 'One-Time', 'Referral', 'Recurring' ]
              meta:
                requirement: [ 'FDR-1064' ]
      - name: interventionAssigneeId
        description: >
          Arcadia's internal identifier for the user to
          whom the intervention is assigned.
      - name: interventionAssignee
        description: >
          Assigned user's full name (Last, First).
      - name: interventionAddedTimestamp
        description: >
          Date and time the intervention was added to
          the care plan.
      - name: interventionAssignedTimestamp
        description: >
          Date and time the intervention was assigned
          to the care plan.
      - name: interventionCompletedTimestamp
        description: >
          Date and time the intervention was
          completed.
      - name: interventionOptOutDate
        description: >
          Date and time the intervention was marked
          opted out.
      - name: interventionInactiveDate
        description: >
          Date and time the intervention was marked
          inactive.
      - name: goalPriority
        description: >
          Priority of level of goal.
      - name: goalStartDate
        description: >
          Start date of goal.
      - name: goalTargetDate
        description: >
          Target date of goal completion.
      - name: phone
        description: >
          If available, the phone number associated with
          the referral status.
      - name: referralStatus
        description: >
          Status of the referral intervention associated
          with the care plan, if applicable.
