version: 2

models:
  - name: v_assessment
    config:
      tags: ['care_quality_and_program_data']
    data_tests:
      - not_empty:
          meta:
            requirement: [ 'FDR-1849' ]
    description: > 
        An assessment is a diagnosis identified at the close of an encounter (provider-patient interaction) that is relevant to that encounter and that includes complaints or reasons for medical attention. All assessments must be coded to a national code set for classification and should represent the providerâ€™s objective determination as to the justifications for procedures for that encounter.         tags: [ 'care_quality_and_program_data' ]
    columns:
    - name: person_id				
      description: >
          QDW person ID for the patient. 
    - name: assessment_id				
      description: >
          QDW assessment ID; primary key for this table.  This is generated by Arcadia.
    - name: site_name				
      description: >
          Name of the clinical data source from which this record was obtained.
    - name: problem_id				
      description: >
          QDW problem ID of the problem that is associated with this assessment.  Some clinical data sources link assessments and problems when an assessment can be attributed to an individual problem.
    - name: encounter_id				
      description: >
          QDW encounter ID for the encounter during which the patient's condition was assessed and this assessment was documented.  This link is required for the assessment to be included in the pseudo claims extract.  It is also used for location filtering in Arcadia Analytics, because the location is derived from the associated encounter.
    - name: provider_NPI				
      description: >
          National Provider Identifier (NPI) code of the provider who recorded this assessment.  NPI codes are maintained by CMS and may represent either an individual provider or a healthcare organization.  Valid NPI codes are 10 digits long with no leading zeroes.  NPI codes do not uniquely identify a given provider row.  The same NPI code may be present on multiple provider rows, for example when the clinical data source uses the NPI code for the organization on rows for providers working in that organization who do not have individual NPI codes.  A given provider could also be active at multiple clinical sites, in which case there would be a multiple provider_ids (one per site) for the same NPI code, since a QDW provider_id is used only on data from a single clinical data source.
    - name: provider_name				
      description: >
          Full name of the provider who recorded this assessment.  This value is derived by combining the values in proehr_first_name and proehr_last_name (not proehr_middle_name) and formatting them as Lastname, Firstname.  When the provider is an organization rather than an individual, this value may not correctly reflect the name due to this automated formatting. 
    - name: original_id				
      description: >
          ID of the assessment row in the Staging database, used to tie back to the source system.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from source system column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.
    - name: original_problem_id				
      description: >
          Original ID of the problem that is associated with this assessment.
    - name: patient_id				
      description: >
          QDW patient ID in integer format for the patient whose assessment is recorded.
    - name: assessment_severity				
      description: >
          Severity of the diagnosis, e.g. 'Mild', 'Moderate', 'Severe', 'Fatal', as specified in the clinical data source.  The values obtained from the clinical data sources vary and may be numeric.
    - name: assessment_description				
      description: >
          Text description associated with the diagnosis that was specified in the ICD9_code or ICD10_code column.  In most cases, this matches the official description for the code, although different sources may use different descriptions for a given code.
    - name: assessment_notes				
      description: >
          Free-text notes entered by the provider along with this diagnosis, such as evidence for the diagnosis, related issues, and recommendations to the patient.
    - name: icd9_code				
      description: >
          ICD9 diagnosis code for the condition that the provider diagnosed the patient as having.  The value is derived from the value in icd9_code_unscrubbed using scrubbing logic to ensure it matches a valid code in lookup.code. If the value in icd9_code_unscrubbed represents an ICD10 code, autodetect logic will move that value into icd10_code and NULL this column. The format includes a period, if one is required.  ICD9 codes are expected on assessments made prior to October 2015.
    - name: icd9_code_unscrubbed				
      description: >
          ICD9 Diagnosis code for the condition that the provider diagnosed the patient as having, as specified in the clinical data source. This value is scrubbed into the icd9_code column.  If the format does not include the period and one is expected, the scrubbing process will insert periods.
    - name: icd10_code				
      description: >
          ICD10 diagnosis code for the condition that the provider diagnosed the patient as having.  The value is set equal to the value in icd10_code_unscrubbed if it is a valid code found in lookup.code. If the value in icd9_code_unscrubbed represents an ICD10 code, autodetect logic will move that value into this column.  The format includes a period, if one is required.  ICD10 codes are expected on assessments from October 2015 to the present.
    - name: icd10_code_unscrubbed				
      description: >
          ICD10 Diagnosis code; the condition that the provider diagnosed the patient as having, as specified in the clinical data source.  This value is scrubbed into the icd10_code column.  If the format does not include the period and one is expected, it will not be recognized as a valid ICD10 code.
    - name: assessment_date				
      description: >
          Date and time when the provider diagnosed the condition.  This is the key date column for this entity, and is used to populate the StartDate in the rpt.Event table.
    - name: primary_diagnosis_ind				
      description: >
          Indicates if the diagnosis is considered the primary diagnosis identified during the encounter.  Used for ED Utilization reports and for Single Patient Report utilization history.  Values 1 (This is the primary diagnosis) and 0 (This is not the primary diagnosis).  If the clinical data source does not specify which diagnosis is considered primary, then this is derived based on the sort order in the clinical data source.  Note that for a given encounter, there could be zero to many rows with a value of 1 for this column.
    - name: entry_timestamp				
      description: >
          Date and time when the row was first inserted into the QDW.
    - name: updated_timestamp				
      description: >
          Date and time when the row was last updated in the QDW.
    - name: create_timestamp				
      description: >
          Date and time when the record was first inserted into the clinical data source.
    - name: modify_timestamp				
      description: >
          Date and time when the record was last updated in the clinical data source.
    - name: created_by				
      description: >
          User who first inserted the row into the source system, as specified by a user ID known to the source system.
    - name: modified_by				
      description: >
          Date and time when the record was last updated in the clinical data source.
    - name: delete_ind				
      description: >
          Indicates if the record is marked as deleted, either because it was deleted in the clinical data source, or because the connector query changed in a way that makes the record no longer valid.  Values are Y (deleted) and N (not deleted).  If the value is 'Y' then the row should be excluded from all queries.
    - name: orig_site_id				
      description: >
          QDW site ID in integer format of the clinical data source from which this record was obtained.
    - name: loaded_from_file				
      description: >
          Name of the file from which this particular record was first loaded, usually a CSV file. When Arcadia pulls data from an EHR source via Informatica, we automatically embed the following pieces of information in this file name: date and time of the extract, client and source IDs, and connector query version.  When data partners instead send us direct feeds that are loaded directly into staging (i.e. bypassing prestaging), the file name is created by the data partner and therefore may not contain the same type of information.
    - name: arc_site_id				
      description: >
          Arcadia site ID of the clinical data source from which this record was obtained.
    - name: arc_provider_id				
      description: >
          The provider's Arcadia universal ID.