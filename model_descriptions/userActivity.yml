version: 2

models:
  - name: cm_userActivity
    description: > 
     This table details the metadata on all completed tasks, such as assessments, notes, and care plan reviews. 
     Information about task assignment, assignee contact info, and task status are included in each record for efficient workflow analysis. 
    config:
      tags: [ 'care_management' ]
      frequencyDomain: 'CARE MANAGEMENT'
    data_tests:
      - not_empty:
          meta:
            requirement: [ 'FDR-717' ]
      - has_rls:
          meta:
            requirement: [ 'ETL-1239' ]
    columns:
      - name: taskId
        description: >
          Arcadia's internal identifier for the care management task.
        data_tests:
          - not_null:
              meta:
                requirement: [ 'FDR-1060' ]
          - relationships:
              to: ref('dbo_tasks')
              field: id
              meta:
                requirement: [ 'FDR-1060' ]
      - name: personId
        description: >
          Arcadia's universal identifier for the patient/member record.
          This identifier is subject to change over time.
        data_tests:
          - not_null:
              meta:
                requirement: [ 'FDR-1060' ]
          - relationships:
              to: ref('v_patient')
              field: person_id
              meta:
                requirement: [ 'FDR-1060' ]
      - name: assigneeId
        description: >
          Arcadia's internal identifier for the user assigned to the task.
      - name: assigneeName
        description: >
          Assigned user's full name (Last, First).
      - name: assigneeEmail
        description: >
          Assigned user's email address.
      - name: taskOutreachMethod
        description: >
          Records outreach method of task performed.
      - name: taskType
        description: >
          Format of the documented task.
      - name: taskDescription
        description: >
          Brief description of the task.
      - name: assessmentTitle
        description: >
          Title of associated assessment.
      - name: creatorId
        description: >
          Arcadia's internal identifier for the task creator.
      - name: creatorName
        description: >
          Last and first name of the task creator.
      - name: creatorEmail
        description: >
          Email of the associated creator.
      - name: autoAssignedInd
        description: >
          A 0/1 indicator that the assignment was autogenerated by
          the automation engine.
      - name: createdTimestamp
        description: >
          Date and time task created.
      - name: scheduledDate
        description: >
          Date and time task scheduled.
      - name: completedTimestamp
        description: >
          Date and time task completed.
      - name: minutesSpent
        description: >
          User reported logging of time spent on task.
      - name: recompleted_at
        description: >
          Indicates date that a task was recompleted.