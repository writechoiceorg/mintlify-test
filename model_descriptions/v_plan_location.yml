version: 2

models:
  - name: v_plan_location
    data_tests:
      - not_empty:
          meta:
            requirement: [ 'FDR-1849' ]
    description: >
       This table contains a master list of all clinics or provider offices that may be reflected in the plan data, such as the locations in which claimed services are provided or to which members are assigned for the purposes of managed care. A location may be something as general as 'Valley View Hospital' or as specific as 'Bay Medical Center Pediatrics', depending on how the plan data source stores this information. Note that the set of locations referred to in the clinical tables, are sourced separately.
    columns:
      - name: location_id
        description: >
            QDW plan location ID; primary key for this table.  This is generated by Arcadia.  The term 'Facility' in the Arcadia Analytics front end refers to an entity that the QDW data model terms a 'location'.  Note that the location IDs used in plan tables are different from the location IDs used in clinical tables.  To cross-reference plan location IDs with clinical location IDs, you would use the plan_location_xref table.
      - name: location_desc
        description: >
            Name of the location.  This name is visible in the Arcadia Analytics front end in the 'Facilities' filter.  Because this is visible to users, it is best if this name is brief (max 35 chars), easy to read, and distinct from the values for other locations.
      - name: handicap_access_ind
        description: >
            Indicates if the location has handicap access.  Valid values are 'Y' (does have handicap access) and 'N' (does not have handicap access).
      - name: tdd_ind
        description: >
            Indicates if the location provides a telecommunications device for the deaf.  Valid values are 'Y' (does have a TDD) and 'N' (does not have a TDD).
      - name: source_id
        description: >
            QDW source ID of the plan data source from which this record was obtained.
      - name: orig_source_id
        description: >
            QDW source ID in character format of the plan data source from which this record was obtained.
      - name: orig_location_id
        description: >
            ID of the plan location row in the Staging database, used to tie back to the plan data source.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from plan data source column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.
      - name: insert_timestamp
        description: >
            Date and time when the row was first inserted into the QDW.
      - name: update_timestamp
        description: >
            Date and time when the row was last updated in the QDW.
      - name: create_timestamp
        description: >
            Date and time when the row was first inserted into the plan data source.
      - name: modify_timestamp
        description: >
            Date and time when the row was last updated in the plan data source.
      - name: created_by
        description: >
            User who first inserted the row into the plan data source, as specified by a user ID known to the plan data source.
      - name: modified_by
        description: >
            User who most recently updated the row in the plan data source, as specified by a user ID known to the plan data source.
      - name: delete_ind
        description: >
            Indicates if the record is marked as deleted, either because it was deleted in the plan data source, or because the connector query changed in a way that makes the record no longer valid.  Values are Y (deleted) and N (not deleted).  If the value is 'Y' then the row should be excluded from all queries.
      - name: loaded_from_file
        description: >
            Name of the file from which this particular record was first loaded, usually a CSV file. The following pieces of information may be embedded in this file name: date and time of the extract, client and source IDs, and connector query version.  
      - name: NPI
        description: >
           NPI value for mapping to NPPES.