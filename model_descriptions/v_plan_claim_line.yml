version: 2

models:
  - name: v_plan_claim_line
    description: > 
        This table contains information on the service line items submitted with claims. Each row in this table should be a child of a parent row in v_plan_claim_header. Service line items are specified by procedure code using standard national codesets, such as CPT / HCPCS, Place of Service, and Revenue Codes. This table also contains details about the provider and location where the service was provided, as well as financial amounts specific to this service line.
    columns:
      - name: person_id
        description: >
          QDW person ID for the patient.     
        data_tests:
          - not_null:
              meta:
                requirement: [ 'FDR-1120' ]
          - relationships:
              to: ref('v_patient')
              field: person_id
              meta:
                requirement: [ 'FDR-1120' ]
      - name: claim_line_id 
        description: >
            QDW claim line ID; primary key for this table.  This is generated by Arcadia.
        data_tests:
          - not_null:
              meta:
                requirement: [ 'FDR-1120' ]
      - name: orig_claim_line_id 
        description: >
            ID of the claim line row in the Staging database, used to tie back to the plan data source.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from plan data source column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.
      - name: claim_header_id 
        description: >
            QDW claim header ID of the claim on which this service line item was submitted.
      - name: orig_claim_header_id
        description: >
            ID of the claim, as specified in the plan data source, on which this service line item was submitted.
      - name: line_no 
        description: >
            Claim line number.  For a given claim_header_id, the claim line numbers should begin at 1.  If the claim contains multiple service line items, then there will generally be additional rows in this table with line_no values of successive integers 2,3,4, etc.. If the plan data source sends us data only for paid (non-denied) claim lines, then there may be claims where no row is present in plan_claim_line with a line_no value of 1, or a line_no in the sequence may be missing.  However, this is not ideal, because some algorithms in Arcadia Analytics look only at claim line 1 for each header.
      - name: claim_type 
        description: >
            Type of claim, based on the type of form used to submit the claim.  Valid  values are 'Inst' (institutional claims, i.e. those submitted by hospitals and facilities on form UB-92 or UB-04), 'Prof' (professional claims, i.e., those submitted by providers on form CMS-1500) and 'Dental'.  For CMS claims from a CCLF, Medicare Part A claims would be represented as 'Inst' and Medicare Part B claims would be represented as 'Prof'.  This value is derived from the value in claim_type_unscrubbed, using mappings in lookup.plan_claim_type in Staging.  If a mapping is not found, the value is set to 'Needs Update'.  The value should match the value on the associated row in plan_claim_header.
      - name: claim_type_unscrubbed 
        description: >
            Type of claim, as specified in the plan data source.  This value is scrubbed into the claim_type column.
      - name: payment_status 
        description: >
            Payment status of the claim line, such as whether the claim was paid or coordination of benefits recovery or refund processing is underway.  This value is derived from the value in payment_status_unscrubbed, using mappings in lookup.plan_payment_status in Staging.  Arcadia has not defined a list of valid codes for this column.  It may be populated in whatever way is useful to the client.
      - name: payment_status_unscrubbed 
        description: >
            Payment status of the claim line, as specified in the plan data source.  This value is scrubbed into the payment_status column.  
      - name: adjustment_status 
        description: >
            Adjustment status of the claim line, indicating whether the claim line was approved or denied.  Valid values are 'Approved' (the claim line was approved/paid) and 'Denied' (the claim line was rejected for some reason such as termination of member eligibility, procedure mismatched with diagnosis, service not covered, etc.).  Although Arcadia Analytics does not make use of this data element, denied claims may be ignored in certain ad hoc calculations.   This value is derived from the value in adjustment_status_unscrubbed, using mappings in lookup.plan_adjustment_status in Staging.  If a mapping is not found, the value is set to 'Needs Update'. 
      - name: adjustment_status_unscrubbed 
        description: >
            Adjustment status of the claim line, as specified in the plan data source.  This value is scrubbed into the adjustment_status column. 
      - name: capitation_ind 
        description: >
            Indicates whether the service specified in this claim line is covered by a capitation agreement.  Capitation is an amount paid according to the contract to the physician on a per member per month basis for provider care to members under the plan.  When a service is covered by a capitation agreement, claims are not paid to the provider, however, the claim might still appear.  Values are 0 (not covered by capitation) and 1 (covered by capitation).  In some client databases, capitation is not reflected in the claims data.  
      - name: member_id 
        description: >
            QDW member ID for the member to whom the healthcare service covered on this claim line was provided.  
      - name: orig_member_id 
        description: >
            Member ID, as specified in the plan data source, for the member to whom the healthcare service covered on this claim line was provided.
      - name: adjudicated_member_elig_id 
        description: >
            QDW member eligibility ID of the member's coverage for a specific plan product under which this claim line was processed.   This is required in order for the claim to be included in the Utilization Detail report.  If not populated, this claim will not be included.  If an adjudicated_product_id is specified on the claim line, then the member eligibility record specified here must be associated with that same product.
      - name: orig_adjudicated_member_elig_id 
        description: >
            Member eligibility ID, as specified in the plan data source, of the member's coverage for a specific plan product under which this claim line was processed.  
      - name: adjudicated_product_id 
        description: >
            QDW product ID of the plan product under which this claim line was processed.  
      - name: orig_adjudicated_product_id 
        description: >
            Product ID, as specified in the plan data source, of the plan product under which this claim line was processed.
      - name: adjudicated_lob_id 
        description: >
            QDW line of business ID of the plan line of business (LOB) under which this claim line was processed.  The Arcadia Analytics product supports filtering based on LOB.  It is expected that all claims will be linked to a line of business.  The plan data source may not necessarily specify an LOB on every claim line, but it can generally be inferred.  For example, data that is provided in CCLF format can be inferred to be associated with a Medicare LOB.  If an adjudicated_product_id is specified on the claim line, that product must be associated on table plan_product with the same LOB as specified on the claim line.
      - name: orig_adjudicated_lob_id 
        description: >
            Line of business ID, as specified in the plan data source, of the plan line of business under which this claim line was processed. 
      - name: adjudicated_site_id 
        description: >
            QDW plan site ID of the clinical site where the service covered on this claim line was provided. This is generally inferred based on the adjudicated_location_id.
      - name: orig_adjudicated_site_id 
        description: >
            Plan site ID, as specified in the plan data source, of the clinical site where the service covered on this claim line was provided.
      - name: adjudicated_location_id 
        description: >
            QDW plan location ID of the location where the service covered on this claim line was provided.  This value is used extensively in Arcadia Analytics, for example in filtering by facilities and calculating measure scores by facility.  The Service Facility filter in the MEM dashboard works exclusively off of this value.  The term 'Facility' in the Arcadia Analytics front end refers to an entity that the QDW data model calls a 'location'.  The linkage from a provider to a location may also be inferred based on their association on rows in this table.  Because plan data sources rarely indicate the location in which the services were provided, this value is usually inferred during the connector development process, based on logic specific to each client and each plan data source.  Often, it is inferred based on the billing provider specified on the claim header, because a billing provider typically represents an organization such as 'Eastview Clinic' rather than an individual.
      - name: orig_adjudicated_location_id 
        description: >
            Plan location ID, as specified in the plan data source, of the location where the service covered on this claim line was provided.
      - name: rendering_provider_id 
        description: >
            QDW plan provider ID of the provider who delivered or completed the service covered on this claim line.  Also referred to as the servicing provider.  In the Arcadia Analytics product, this provider ID is used in the 'functional attribution / four-cut' method of identifying the relevant provider for a patient.
      - name: orig_rendering_provider_id 
        description: >
            Provider ID, as specified in the plan data source, of the provider who delivered or completed the service covered on this claim line.
      - name: rendering_provider_npi 
        description: >
            National Provider Identifier (NPI) code of the rendering provider.  NPI codes are maintained by CMS and may represent either an individual provider or a healthcare organization.  Valid NPI codes are 10 digits long with no leading zeroes.  NPI codes do not uniquely identify a given plan provider row.  The same NPI code may be present on multiple plan provider rows, for example when the plan data source uses the organization's NPI code for providers working in that organization who do not have individual NPI codes.  A given plan provider could also be active in multiple plan data sources, in which case there would be a multiple provider_ids (one per plan data source) for the same NPI code, since a QDW plan provider_id is used only on data from a single plan data source.  The NPI code is used to match providers specified in various plan and clinical tables, and the match results are represented in the ProviderPerson table.
      - name: pos 
        description: >
            Code representing the place of service in which the service covered on this claim line was provided.  This value is used extensively in expense and utilization analyses and for inferring episodes of care such as inpatient stays.  Place of service codes are defined by CMS and represent the types of settings in which health services are provided.  Valid values are two-digit codes, which may have leading zeroes, from 01 through 99.  Some common example values are 11 (Office) and 22 (Emergency Room - Hospital).  This value is derived from the value in pos_unscrubbed, using mappings in lookup.plan_pos in Staging.  If a mapping is not found, the value is set to 'Needs Update'.  When the plan data source does not provide POS but does provide bill_type, the POS may be inferred based on bill_type.
      - name: pos_unscrubbed 
        description: >
            Code or value representing the place of service in which the service covered on this claim line was provided, as specified in the plan data source.  This value is scrubbed into the pos column.
      - name: procedure_code 
        description: >
            CPT (Current Procedural Terminology) or HCPCS (Healthcare Common Procedure Coding System) or CDT (Current Dental Terminology) procedure code for the procedure performed or service provided that is covered on this claim line.  Valid CPT codes are formatted generally as 5 numeric digits, for example '99213' (Office/outpatient visit est) or occasionally as 4 numeric digits followed by a single alpha character, for example '4040F' (Pneumoc vac/admin/rcvd).  Valid HCPCS codes are formatted as a single alpha character followed by 4 numeric digits, for example 'G0431' (Drug screen multiple class).  Valid CDT codes are formatted as the letter 'D' followed by 4 numeric digits, for example 'D7240' (Impact tooth remov comp bony).  CDT codes are often considered to be valid CPT codes.  
      - name: procedure_code_type 
        description: >
            Type of code specified in the procedure_code column.  Arcadia Analytics currently supports only CPT and HCPCS and CDT codes.  Additionally, it expects that HCPCS and CDT codes will be categorized with procedure_code_type of 'CPT'; if a HCPCS code is categorized as procedure_code_type 'HCPCS', it will not be recognized by the measure calculation logic.  Therefore, currently the only valid value in this column is 'CPT'.   This value is derived from the value in procedure_code_type_unscrubbed, using mappings in lookup.plan_procedure_code_type in Staging.  If a mapping is not found, the value is set to 'Needs Update'.  
      - name: procedure_code_type_unscrubbed 
        description: >
            Type of code specified in the procedure_code column, as specified in the plan data source.  This value is scrubbed into the procedure_code_type column.
      - name: procedure_modifier_1 
        description: >
            First CPT or HCPCS modifier for the procedure.  A CPT or HCPCS modifier is a two-alphanumeric character code that further describes the service specified in procedure_code, e.g. '25', 'HD', 'HE', 'SL'.  
      - name: procedure_modifier_2 
        description: >
            Second CPT or HCPCS modifier for the procedure.  A CPT or HCPCS modifier is a two-alphanumeric character code that further describes the service specified in procedure_code, e.g. '25', 'HD', 'HE', 'SL'.  
      - name: procedure_modifier_3 
        description: >
            Third CPT or HCPCS modifier for the procedure.  A CPT or HCPCS modifier is a two-alphanumeric character code that further describes the service specified in procedure_code, e.g. '25', 'HD', 'HE', 'SL'.  
      - name: procedure_modifier_4 
        description: >
            Fourth CPT or HCPCS modifier for the procedure.  A CPT or HCPCS modifier is a two-alphanumeric character code that further describes the service specified in procedure_code, e.g. '25', 'HD', 'HE', 'SL'.  
      - name: revenue_code 
        description: >
            Revenue code, from the UB92/UB04 institutional claim form.  Revenue codes are a classification of hospital charges in a standard grouping that is controlled by the National Uniform Billing Committee (NUBC).  This is relevant for institutional claims only.  Valid revenue codes are represented as four numeric digits with leading zeroes.  For example, revenue code '0450' means 'Emergency Room - General Classification'.
      - name: service_from_date 
        description: >
            Date of the start of the period in which the services covered on the claim line were provided.  For an outpatient claim, this date represents the date of the member's visit, or the date on which the services were provided.  For an inpatient claim, this date represents the first date of the period covered by the claim line.  This is not the same as the date of admission because an inpatient stay might be billed on multiple claims, each covering different periods.
      - name: service_from_date_unscrubbed 
        description: >
            Date of the start of the period in which the services covered on the claim line were provided, as specified in the plan data source.
      - name: service_thru_date 
        description: >
            Date of the end of the period in which the services covered on the claim line were provided.  For an outpatient claim, this date is generally the same as the service_from_date.  For an inpatient claim, this represents the last date of the period covered by the claim line, which may or may not be the date of discharge.
      - name: service_thru_date_unscrubbed 
        description: >
            Date of the end of the period in which the services covered on the claim line were provided, as specified in the plan data source.
      - name: received_date 
        description: >
            Date and time when the claim was received. This value is taken from the claim header.  Typically the time information is all zeroes.
      - name: paid_date 
        description: >
            Date and time when the claim was paid. This value is taken from the claim header.  Typically the time information is all zeroes.
      - name: units 
        description: >
            The number of units of the service specified in procedure_code that are covered on this claim line.  A negative value in this column indicates that this row represents a reversal or negative adjustment.
      - name: billed_amount 
        description: >
            Billed amount for the specified service.  On the claim forms, this is labeled 'Charges' or 'Line Item Charge Amount'.  A negative value in this column indicates that this row represents a reversal or negative adjustment.  Occasionally the amount will be zero, such as when the payment amount is per episode (outpatient) or there is a standard payment amount per discharge (inpatient).
      - name: allowed_amount 
        description: >
            Amount allowed by the payor, which is the maximum amount on which payment is based for covered health care services. This may be called 'eligible expense,' 'payment allowance' or 'negotiated rate.'  Allowed amounts are generally based on the rate specified by the insurance, such as a fee negotiated with participating providers, an allowance established by law, or an amount set on a Fee Schedule of Allowance.  When a provider submits a bill for more than the allowed amount, the payor bases payment algorithms on the allowed amount rather than the billed amount.  A negative value in this column indicates that this row represents a reversal or negative adjustment.
      - name: not_covered_amount 
        description: >
            Amount not covered by insurance.
      - name: deductible_amount 
        description: >
            Amount of this claim line that was applied to the member's deductible amount.  Note that some clients do not break down deductible/ copay/ coinsurance amounts and may only specify total member payment.  A negative value in this column indicates that this row represents a reversal or negative adjustment.  
      - name: copay_amount 
        description: >
            Copay amount applied to this claim line. The copay is a specific charge that the health insurance plan requires a member to pay for a specific medical service or supply.  When a claim is submitted, if the member is responsible for a copay for the billed service, then the claim will be paid (in part) from the member's copay, and that amount will be reflected in this column. Note that some clients do not break down deductible/ copay/ coinsurance amounts and may only specify total member payment.  A negative value in this column indicates that this row represents a reversal or negative adjustment. 
      - name: coinsurance_amount 
        description: >
            Coinsurance amount for this claim line.  Coinsurance is the member's share of the costs of a covered health care service, calculated as a percentage (for example, 20%) of the allowed amount for the service. The members pays coinsurance after meeting the deductible. For example, if the health insurance planï¿½s allowed amount for an office visit is $100 and the member has met the deductible, the 20% coinsurance payment would be $20. The health insurance plan pays the rest.  Note that some clients do not break down deductible/ copay/ coinsurance amounts and may only specify total member payment.  A negative value in this column indicates that this row represents a reversal or negative adjustment.
      - name: paid_amount 
        description: >
            Amount that the plan paid to the billing provider for this claim line, excluding any interest.  A negative value in this column indicates that this row represents a reversal or negative adjustment.  
      - name: interest_amount 
        description: >
            Interest amount.  
      - name: check_amount 
        description: >
            Actual amount that the plan paid to the billing provider for this claim line, which may include interest.  A negative value in this column indicates that this row represents a reversal or negative adjustment.  In most client databases, this column is always null.
      - name: fee_for_service_equivalent_amount 
        description: >
            Fee-for-service or fee-for-service equivalent amount, the plan-supplied price for this service.  This is the amount that appears as 'Cost' in Total Member Expense and other cost calculations visible in the Arcadia Analytics front end.  Standard connector logic uses the best available amount value to populate this column, according to the following priority:  if an explicit fee_for_service equivalent amount is supplied, use that, else use the allowed amount, else use the paid amount. This is the most important amount column in this table, and is referenced in many data dependencies.  A negative value in this column indicates that this row represents a reversal or negative adjustment.
      - name: COB_paid_amount 
        description: >
            Coordination of benefits paid amount.  When a member has active policies with two or more carriers, and some part of the claim line is paid by a secondary policy, this amount is reflected in this column.  A negative value in this column indicates that this row represents a reversal or negative adjustment.  In most client databases, this column is always null.
      - name: provider_write_off_amount 
        description: >
            (This data element is not populated.)
      - name: patient_liab_cost_share_amount 
        description: >
            Patient liability/cost share amount.  For certain Medicaid recipients in long-term care, this is the amount for which the member is responsible.
      - name: benefit_category 
        description: >
            (This data element is not populated.)
      - name: source_id 
        description: >
            QDW source ID of the plan data source from which this record was obtained.
      - name: orig_source_id 
        description: >
            QDW source ID in character format of the plan data source from which this record was obtained.
      - name: insert_timestamp 
        description: >
            Date and time when the row was first inserted into the QDW.
      - name: update_timestamp 
        description: >
            Date and time when the row was last updated in the QDW.
      - name: create_timestamp 
        description: >
            Date and time when the row was first inserted into the plan data source.
      - name: modify_timestamp 
        description: >
            Date and time when the row was last updated in the plan data source.
      - name: created_by 
        description: >
            User who first inserted the row into the plan data source, as specified by a user ID known to the plan data source.
      - name: modified_by 
        description: >
            User who most recently updated the row in the plan data source, as specified by a user ID known to the plan data source.
      - name: delete_ind 
        description: >
            Indicates if the record is marked as deleted, either because it was deleted in the plan data source, or because the connector query changed in a way that makes the record no longer valid.  Values are Y (deleted) and N (not deleted).  If the value is 'Y' then the row should be excluded from all queries.
      - name: loaded_from_file 
        description: >
            Name of the file from which this particular record was first loaded, usually a CSV file. The following pieces of information may be embedded in this file name: date and time of the extract, client and source IDs, and connector query version.  
      - name: withhold_amount 
        description: >
            Withhold amount, the amount a plan is not paying to a provider as a result of a reversal or administrative action.  For example, if the plan overpaid a provider, instead of asking for the entire amount back they may withold an amount from each claim until total value is hit.
      - name: claim_at_risk 
        description: >
            A 0/1 indicator that, in the given month, this member is considered "At Risk" for a payer contract. This column can be summed to generate aggregate numbers of at-risk patients, or used as a filter. 
      - name: claim_at_risk_ind 
        description: >
          Indication whether a specific service, claim line, is attributed to the risk-bearing entity or carved out.
      - name: denial_reason 
        description: >
            This value is derived from denial_reason_unscrubbed. The reason that no payment is made for services on an institutional claim.
      - name: denial_reason_unscrubbed 
        description: >
            The reason that no payment is made for services on an institutional claim.  This value is scrubbed into the denial_reason column.
      - name: inNetworkService 
        description: >
          Indicator if the service on this claim line is in network.
      - name: inNetworkProvider 
        description: >
          Indicator if the provider on this claim line is in network
      - name: rendering_provider_tin 
        description: >
           Taxpayer Identification Number of rendering provider.
      - name: rendering_provider_specialty
        description: >
            Specialty of rendering provider for this line item