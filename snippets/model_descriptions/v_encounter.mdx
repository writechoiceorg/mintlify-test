export const schema = {
  "version": 2,
  "models": [
    {
      "name": "v_encounter",
      "config": {
        "tags": [
          "care_quality_and_program_data"
        ]
      },
      "data_tests": [
        {
          "not_empty": {
            "meta": {
              "requirement": [
                "FDR-1849"
              ]
            }
          }
        }
      ],
      "description": "An encounter is an interaction, regardless of the setting, between a patient and a practitioner who is vested with primary responsibilities for diagnosing, evaluating, or treating the patient’s condition. Encounters must contain information about the parties involved (patient, provider), the date of the event, and the nature of or reason for the encounter.   Arcadia Analytics will store multiple types of encounters, including and not limited to:  in-person visits, telephone conversations, and electronic message exchanges. Whether an encounter is classified as a “medical encounter” is determined either by corroborating procedure data from the charge table, or through direct indication in the encounter type data element.\n",
      "columns": [
        {
          "name": "person_id",
          "description": "QDW person ID for the patient. \n"
        },
        {
          "name": "enc_id",
          "description": "QDW encounter ID in integer format; an alternate primary key generated by Arcadia.  This value is used in the rpt.event table to tie back to a specific row in this table. \n"
        },
        {
          "name": "enc_site_name",
          "description": "Name of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "enc_original_id",
          "description": "ID of the encounter row in the Staging database, used to tie back to the source system.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from source system column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.\n"
        },
        {
          "name": "enc_patient_id",
          "description": "QDW patient ID in integer format for the patient whose encounter is recorded.\n"
        },
        {
          "name": "enc_timestamp",
          "description": "Date and time when the encounter began, i.e. when the provider first interacted with the patient.  If the clinical data source does not capture when the provider first interacted with the patient, then this value may instead represent the time when the patient checked in.  This is the key date column for this entity, and is used to populate the StartDate in the rpt.Event table.  This value is used in determining the 'Last Service Date' that is visible in Arcadia Analytics.  \n"
        },
        {
          "name": "enc_location_name",
          "description": "Name of the clinical location where the encounter took place.  This value is derived from the value in enc_location_unscrubbed, using mappings found in Staging table lookup.location.  If the unscrubbed value cannot be mapped to a location ID, then this is populated with the ID of the default location for that site. This is the name that is displayed in the front end.\n"
        },
        {
          "name": "enc_payer_id",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_type",
          "description": "Text description of the type of encounter.  If the clinical data source has defined values with categories of encounter types such as 'Office Visit' or 'Dental' or 'Well Child', those values will be in this column.  The value may be either a code or a phrase.  Arcadia Analytics may use certain specific values such as 'Emergency', 'Inpatient', and 'Nursing Facility' in categorizing events.\n"
        },
        {
          "name": "enc_type_description",
          "description": "Text description of the type of encounter indicated by the value in the enc_type column, if enc_type is stored as a coded value.\n"
        },
        {
          "name": "enc_dept_desc",
          "description": "Name of the department in which the encounter took place, e.g. 'Family Practice', 'Mental Health', 'Case Management/Maternity Support'.  The value is taken from the clinical data source, so it does not conform to a specific Arcadia list.\n"
        },
        {
          "name": "enc_orig_dept_id",
          "description": "ID of the department in which the encounter took place, as specified in the clinical data source.\n"
        },
        {
          "name": "enc_billable_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_clinical_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_optical_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_status",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_eligibility_check_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_reason",
          "description": "The reason that prompted the encounter, e.g. 'Labs', 'F/U Back pain', 'Abdominal pain', etc.), as specified in the clinical data source.  This is often null, but when populated it often is based on a list of values standard within the clinical data source.\n"
        },
        {
          "name": "enc_discharge_timestamp",
          "description": "Date and time when the patient was discharged, if the encounter was inpatient.  For outpatient encounters the value will be null.\n"
        },
        {
          "name": "enc_notes",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_room",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_delete_ind",
          "description": "Indicates if the record is marked as deleted, either because it was deleted in the clinical data source, or because the connector query changed in a way that makes the record no longer valid.  Values are 'Y' (deleted) and 'N' (not deleted).  If the value is 'Y' then the row should be excluded from all queries.\n"
        },
        {
          "name": "enc_modify_timestamp",
          "description": "Date and time when the record was last updated in the clinical data source.\n"
        },
        {
          "name": "enc_create_timestamp",
          "description": "Date and time when the record was first inserted into the clinical data source.\n"
        },
        {
          "name": "enc_modify_by",
          "description": "User who most recently updated the row in the source system, as specified by a user ID known to the source system.  Is not currently populated but will be populated in a future enhancement.\n"
        },
        {
          "name": "enc_created_by",
          "description": "User who first inserted the row into the source system, as specified by a user ID known to the source system.  Is not currently populated but will be populated in a future enhancement.\n"
        },
        {
          "name": "enc_entry_timestamp",
          "description": "Date and time when the row was first inserted into the QDW.\n"
        },
        {
          "name": "enc_updated_timestamp",
          "description": "Date and time when the row was last updated in the QDW.\n"
        },
        {
          "name": "enc_orig_site_id",
          "description": "QDW site ID in integer format of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "enc_age_months",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_age_years",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_provider1_name",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_provider2_name",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "nc_provider3_name",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_medical_ind",
          "description": "Indicates whether the encounter was a medical encounter, defined as a physical encounter between the patient and the eligible provider in which he/she renders any evaluation and management medical service.  Values are 'Y' (medical encounter) and 'N' (non-medical encounter).  This value is derived by Arcadia in the scrubbing process, which flags an encounter as medical only if the encounter is linked to one or more rows in t_chargecapture that have a CPT code that is populated and is found in lookup.medCPT.  Occasionally, for encounters from a specific source, this value is instead mapped based on the value in enc_type using mapping rules in lookup.medenc, but that type of mapping is rarely used.  The medical encounter indicator is an important indicator, used as inclusion criteria for many reports and measures throughout Arcadia Analytics.\n"
        },
        {
          "name": "enc_rendering_provider_NPI",
          "description": "National Provider Identifier (NPI) code of the provider rendering services in this encounter.  This value is derived from the value in enc_orig_rendering_provider_id.  If that original provider ID is not found in the provider_master table, then this value is set to the ID of the 'Unassigned Provider' as specified for the site.    NPI codes are maintained by CMS and may represent either an individual provider or a healthcare organization.  Valid NPI codes are 10 digits long with no leading zeroes.  NPI codes do not uniquely identify a given provider row.  The same NPI code may be present on multiple provider rows, for example when the clinical data source uses the NPI code for the organization on rows for providers working in that organization who do not have individual NPI codes.  A given provider could also be active at multiple clinical sites, in which case there would be a multiple provider_ids (one per site) for the same NPI code, since a QDW provider_id is used only on data from a single clinical data source.\n"
        },
        {
          "name": "enc_rendering_provider_name",
          "description": "Full name of the provider rendering services in this encounter.  This value is derived from the value in enc_orig_rendering_provider_id.  If that original provider ID is not found in the provider_master table, then this value is set to the ID of the 'Unassigned Provider' as specified for the site.    This value is derived by combining the values in proehr_first_name and proehr_last_name (not proehr_middle_name) and formatting them as Lastname, Firstname.  When the provider is an organization rather than an individual, this value may not correctly reflect the name due to this automated formatting. \n"
        },
        {
          "name": "enc_location_unscrubbed",
          "description": "Name of the clinical location where the encounter took place, e.g. 'Othello Family Clinic' or 'Interfaith Community Health Center', as specified in the clinical data source.  This value is scrubbed into the enc_location_id column. \n"
        },
        {
          "name": "enc_loaded_from_file",
          "description": "Name of the file from which this particular record was first loaded, usually a CSV file. When Arcadia pulls data from an EHR source via Informatica, we automatically embed the following pieces of information in this file name: date and time of the extract, client and source IDs, and connector query version.  When data partners instead send us direct feeds that are loaded directly into staging (i.e. bypassing prestaging), the file name is created by the data partner and therefore may not contain the same type of information.\n"
        },
        {
          "name": "enc_locked_ind",
          "description": "Indicates whether the encounter record has been locked in the clinical data source.  Most EHRs still represent the record as a series of documents filled out by the provider. The documents are grouped into folders called encounters where each folder is a day. When a patient comes in, a new folder is created and documents are added based on what the provider is documenting. Typically, after 72 hours an encounter locks, meaning the documents in the folder can no longer be edited in the EHR. The locked documents then constitute the legal health record.  Values '1' and '0'.\n"
        },
        {
          "name": "enc_no_known_allergy_ind",
          "description": "Indicated whether that patient verfied no allergies during the encounter.\n"
        },
        {
          "name": "enc_no_known_medication_ind",
          "description": "Indicated whether that patient verfied no medications during the encounter.\n"
        },
        {
          "name": "enc_no_known_problem_ind",
          "description": "Indicated whether that patient verfied no problems during the encounter.  Used only for MU/PCMH measures.\n"
        },
        {
          "name": "enc_appt_id",
          "description": "ID of the scheduled appointment that resulted in this encounter. This is populated only when the clinical data source explicitly links appointments and their resulting encounters.\n"
        },
        {
          "name": "enc_appt_original_id",
          "description": "Original ID of the scheduled appointment that resulted in this encounter.\n"
        },
        {
          "name": "enc_dental_ind",
          "description": "Indicates whether the encounter was a dental encounter or not.  Values are '1' and '0'.  Is usually null.\n"
        },
        {
          "name": "enc_optometry_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_behavioral_ind",
          "description": "Indicates whether the encounter was a behavioral health encounter or not.  Values are '1' and '0'.  Is usually null.\n"
        },
        {
          "name": "enc_enabling_ind",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "enc_locked_timestamp",
          "description": "Date and time when the encounter record was locked in the clinical data source.\n"
        },
        {
          "name": "enc_signed_ind",
          "description": "Indicates whether the encounter record has been signed (by a rendering or reviewing provider) in the clinical data source.  Values are 'Y' (encounter has been signed) and 'N' (encounter has not been signed).\n"
        },
        {
          "name": "enc_signed_timestamp",
          "description": "Date and time when the encounter progress notes were signed by the rendering or reviewing provider.  \n"
        },
        {
          "name": "enc_progress_note_ind",
          "description": "Indicates whether the progress notes for this encounter were signed.  Values are '1' (notes were signed) and '0' (notes were not signed).\n"
        },
        {
          "name": "enc_opt_out_ind",
          "description": "Indicates if the encounter should be omitted from analyses.  Values are '1' (omit) and '0' (do not omit).\n"
        },
        {
          "name": "enc_orig_patient_id",
          "description": "ID of the relevant patient, as specified in the clinical data source.\n"
        },
        {
          "name": "enc_orig_rendering_provider_id",
          "description": "ID of the rendering provider, as specified in the clinical data source.  This value is scrubbed into the enc_rendering_provider_id column.\n"
        },
        {
          "name": "enc_orig_scrubbed_ind",
          "description": "Indicator for scrubbing bypass. Currently used by medical indicator.\n"
        },
        {
          "name": "enc_TIN",
          "description": "The Federal Tax Identification Number of the provider, if applicable.\n"
        },
        {
          "name": "arc_site_id",
          "description": "Arcadia site ID of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "arc_provider_id",
          "description": "The provider's Arcadia universal ID.\n"
        }
      ]
    }
  ]
};
