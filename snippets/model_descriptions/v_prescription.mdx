export const schema = {
  "version": 2,
  "models": [
    {
      "name": "v_prescription",
      "config": {
        "tags": [
          "care_quality_and_program_data"
        ]
      },
      "description": "A prescription is an order for the supply of a specific medication at a point in time and for a certain number of fills, along with instructions for administration of the medicine to a patient, whether they are filled by the prescriber or ordered to be filled by a pharmacy.  The prescription entity is inclusive of prescription medications, over-the-counter medications, and nutritional/diet supplements, provided they are ordered by a provider and documented in the source system. Instructions should consist of recommended dosage and timings for administration, as well as additional instructions as ordered.  All prescriptions must be encoded with either an NDC or RxNorm code set.\n",
      "data_tests": [
        {
          "not_empty": {
            "meta": {
              "requirement": [
                "FDR-1849"
              ]
            }
          }
        }
      ],
      "columns": [
        {
          "name": "person_id",
          "description": "QDW person ID for the patient. \n"
        },
        {
          "name": "prescription_id",
          "description": "QDW prescription ID in integer format; an alternate primary key generated by Arcadia.  This value is used in the rpt.event table to tie back to a specific row in this table.\n"
        },
        {
          "name": "site_name",
          "description": "Name of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "enc_id",
          "description": "QDW encounter ID for the encounter during which the provider wrote the prescription.  This link is required for the prescription to be included in the pseudo claims extract. \n"
        },
        {
          "name": "provider_NPI",
          "description": "National Provider Identifier (NPI) code of the prescribing provider.  NPI codes are maintained by CMS and may represent either an individual provider or a healthcare organization.  Valid NPI codes are 10 digits long with no leading zeroes.  NPI codes do not uniquely identify a given provider row.  The same NPI code may be present on multiple provider rows, for example when the clinical data source uses the NPI code for the organization on rows for providers working in that organization who do not have individual NPI codes.  A given provider could also be active at multiple clinical sites, in which case there would be a multiple provider_ids (one per site) for the same NPI code, since a QDW provider_id is used only on data from a single clinical data source.\n"
        },
        {
          "name": "provider_name",
          "description": "Full name of the prescribing provider.  This value is derived by combining the values in proehr_first_name and proehr_last_name (not proehr_middle_name) and formatting them as Lastname, Firstname.  When the provider is an organization rather than an individual, this value may not correctly reflect the name due to this automated formatting. \n"
        },
        {
          "name": "original_id",
          "description": "ID of the prescription row in the Staging database, used to tie back to the source system.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from source system column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.\n"
        },
        {
          "name": "patient_id",
          "description": "QDW patient ID in integer formatfor the patient whose prescription is recorded.\n"
        },
        {
          "name": "ndc_code",
          "description": "National Drug Code (NDC code) for the prescribed medication.  Generally formatted as 11 numeric characters, which may contain leading zeroes.\n"
        },
        {
          "name": "ndc_code_unscrubbed",
          "description": "National Drug Code (NDC code) for the documented medication, as specified in the clinical data source.  This value is scrubbed into the ndc_code column. \n"
        },
        {
          "name": "RxNorm",
          "description": "RxNorm concept unique identifier (RXCUI) for the prescribed medication, if the medication is specified using an RxNorm code instead of an NDC code.  Generally formatted as 1-7 numeric characters with no leading zeroes.  Drugs whose names map to the same RXCUI are taken to be the same drug and are identical as to ingredients, strengths, and dose forms. Conversely, drugs that differ in any of these particulars are conceptually distinct and will have different RXCUIs.\n"
        },
        {
          "name": "prescription_date",
          "description": "Date and time when the provider wrote the prescription.  This is the key date column for this entity, and is used to populate the StartDate in the rpt.Event table.  For electronic prescriptions the time information may be present, but for non-electronic prescriptions the time information is typically all zeroes.\n"
        },
        {
          "name": "end_date",
          "description": "Date when the patient is expected to take the last dose of the prescribed medication.  This is a calculated column.  The algorithm for calculating it, as found in the t_prescription CREATE TABLE statement, shows it to be a function of the prescribed date, the days supply, and the number of refills.  Note that this end_date, in contrast to plan_claim_rx.end_date, represents the last date of all the possible refills of this prescription.  This is used in the rpt.event table.  \n"
        },
        {
          "name": "prescription_method",
          "description": "Method in which the prescription was submitted, e.g. 'E' (Electronic), 'F' (Fax), 'P' (Print), or 'U' (Unknown).  Certain Meaningful Use and PCMH measures look for a value of 'E' to identify electronic submission of prescriptions.\n"
        },
        {
          "name": "quantity",
          "description": "Number of units of medication prescribed.  Note that there is no column representing the units in which this is specified.  Therefore this value is ambiguous.  The value is visible in Arcadia Analytics but is not used in any measure calculation or in any quantitative analysis.  The more reliable quantitative value to use for any prescription is in the days_supply column.  \n"
        },
        {
          "name": "refills",
          "description": "Number of refills prescribed; number of times the patient is authorized to refill the medication. This value is derived by converting the value in refills_unscrubbed to an integer.\n"
        },
        {
          "name": "refills_unscrubbed",
          "description": "Number of refills prescribed, as specified in the clinical data source; number of times the patient is authorized to refill the medication.  This value is scrubbed into the refills column.\n"
        },
        {
          "name": "days_supply",
          "description": "Number of days worth of medication to be dispensed.  This value is used in calculating the expected end date of the prescription.\n"
        },
        {
          "name": "daw_ind",
          "description": "Indicates if the provider wrote the prescription as \"Dispense As Written\" (DAW), meaning a pharmacist cannot substitute an FDA-approved generic medication.ï¿½Values are '1' (prescription written as DAW) and '0' (prescription not written as DAW; generics could be substituted).\n"
        },
        {
          "name": "sig_codes",
          "description": "Sig code abbreviations indicating form, frequency, and amount of medication the patient should take.  Generally formatted as a series of short alphanumeric codes such as '1T PO QD', meaning 'Take one tablet by mouth once daily'.  This value is referenced by a few ACO measures.\n"
        },
        {
          "name": "sig_description",
          "description": "Expanded text version or translation of the sig codes, indicating form, frequency, and amount of medication the patient should take. \n"
        },
        {
          "name": "medication_dictionary",
          "description": "Name of the medication dictionary from which the medication name was drawn, e.g. 'NDC' or 'Medispan'.\n"
        },
        {
          "name": "CPOE_ind",
          "description": "Indicates if the medication was prescribed using CPOE, or Computerized Physician Order Entry, which is the process of capturing a physician's instructions for a patient's care electronically.  Values are '1' (prescribed using CPOE) and '0' (CPOE was not used to prescribe the medication).  Used for MU measures only.\n"
        },
        {
          "name": "entry_timestamp",
          "description": "Date and time when the row was first inserted into the QDW.\n"
        },
        {
          "name": "updated_timestamp",
          "description": "Date and time when the row was last updated in the QDW.\n"
        },
        {
          "name": "create_timestamp",
          "description": "Date and time when the record was first inserted into the clinical data source.\n"
        },
        {
          "name": "modify_timestamp",
          "description": "Date and time when the record was last updated in the clinical data source.\n"
        },
        {
          "name": "created_by",
          "description": "User who first inserted the row into the source system, as specified by a user ID known to the source system.\n"
        },
        {
          "name": "modified_by",
          "description": "User who most recently updated the row in the source system, as specified by a user ID known to the source system.\n"
        },
        {
          "name": "delete_ind",
          "description": "Indicates if the record is marked as deleted, either because it was deleted in the clinical data source, or because the connector query changed in a way that makes the record no longer valid.  Values are Y (deleted) and N (not deleted).  If the value is 'Y' then the row should be excluded from all queries.\n"
        },
        {
          "name": "orig_site_id",
          "description": "QDW site ID in integer format of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "loaded_from_file",
          "description": "Name of the file from which this particular record was first loaded, usually a CSV file. When Arcadia pulls data from an EHR source via Informatica, we automatically embed the following pieces of information in this file name: date and time of the extract, client and source IDs, and connector query version.  When data partners instead send us direct feeds that are loaded directly into staging (i.e. bypassing prestaging), the file name is created by the data partner and therefore may not contain the same type of information.\n"
        },
        {
          "name": "medication_name",
          "description": "Name of the prescribed medication, including dosage and format, e.g. 'Metformin 500 mg Tab'.  Should correspond to the description associated with the NDC or RxNorm code, although the description may not match exactly.\n"
        },
        {
          "name": "medication_generic_name",
          "description": "Generic name of the prescribed medication, e.g. 'Lisinopril', 'Ibuprofen', or 'Metformin', not including dosage or format descriptors.\n"
        },
        {
          "name": "order_ind",
          "description": "Indicates if the prescription was documented based on an order in the clinical data source; relevant for the Meaningful Use CPOE measure.  Values are 1 (prescription was documented based on an order) and 0 (prescription was documented based on data other than an order). \n"
        },
        {
          "name": "formulary_check_ind",
          "description": "Indicates whether there is evidence that the EHR compared the prescription to an online formulary service or preferred drug list per the patient's insurance.  This is relevant for the Meaningful Use Stage 2 eRx measure.  Values are 1 (EHR used a formulary or preferred drug list) and 0 (EHR did not use a formulary or preferred drug list) .\n"
        },
        {
          "name": "location_name",
          "description": "Name of the clinical location from which the prescription was submitted.  This value is mapped from the value in location_unscrubbed.  If the unscrubbed value cannot be mapped to a location ID, then this is populated with the ID of the default location for that site. This is the name that is displayed in the front end.\n"
        },
        {
          "name": "location_unscrubbed",
          "description": "ID for the clinical location from which the prescription was submitted, as specified in the clinical data source.  This value is scrubbed into the location_id column.\n"
        },
        {
          "name": "orig_enc_id",
          "description": "ID of the encounter when the prescription was written, as specified in the clinical data source.\n"
        },
        {
          "name": "orig_provider_id",
          "description": "ID of the provider who wrote the prescription, as specified in the clinical data source.\n"
        },
        {
          "name": "orig_patient_id",
          "description": "ID of the relevant patient, as specified in the clinical data source.\n"
        },
        {
          "name": "arc_site_id",
          "description": "Arcadia site ID of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "arc_provider_id",
          "description": "The provider's Arcadia universal ID.\n"
        }
      ]
    }
  ]
};
