export const schema = {
  "version": 2,
  "models": [
    {
      "name": "v_patient",
      "config": {
        "tags": [
          "care_quality_and_program_data"
        ]
      },
      "data_tests": [
        {
          "not_empty": {
            "meta": {
              "requirement": [
                "FDR-1849"
              ]
            }
          }
        },
        {
          "has_rls": {
            "meta": {
              "requirement": [
                "FDR-1514"
              ]
            }
          }
        }
      ],
      "description": "A patient is the subject of the medical record being extracted. A patient record contains information necessary to establish identity for the purposes of MPI alignment, such as name, sex, date of birth, SSN, and other identifiers, as well as demographic information useful for further analysis, such as race, ethnicity, and language. The patient record can also explicitly establish a relationship with a provider as PCP.\n",
      "columns": [
        {
          "name": "person_id",
          "description": "QDW person ID for the patient.\n"
        },
        {
          "name": "patient_id",
          "description": "QDW patient ID in integer format in integer format; an alternate primary key generated by Arcadia.  This value is used as the IndividualID in the rpt.event table for clinical events.\n",
          "data_tests": [
            "not_null",
            {
              "relationships": {
                "to": "ref('activePersonIDs')",
                "field": "patientId"
              }
            }
          ]
        },
        {
          "name": "pat_responsible_provider_NPI",
          "description": "National Provider Identifier (NPI) code of the provider responsible for the patient's care, as attributed by the clinical source. This value is used in clinical provider attribution.  This value is derived from the value in pat_provider_id_unscrubbed.  NPI codes are maintained by CMS and may represent either an individual provider or a healthcare organization.  Valid NPI codes are 10 digits long with no leading zeroes.  NPI codes do not uniquely identify a given provider row.  The same NPI code may be present on multiple provider rows, for example when the clinical data source uses the NPI code for the organization on rows for providers working in that organization who do not have individual NPI codes.  A given provider could also be active at multiple clinical sites, in which case there would be a multiple provider_ids (one per site) for the same NPI code, since a QDW provider_id is used only on data from a single clinical data source.\n"
        },
        {
          "name": "pat_responsible_provider_name",
          "description": "Full name of the provider responsible for the patient's care, as attributed by the clinical source. This value is used in clinical provider attribution.  This value is derived from the value in pat_provider_id_unscrubbed.  This value is derived by combining the values in proehr_first_name and proehr_last_name (not proehr_middle_name) and formatting them as Lastname, Firstname.  When the provider is an organization rather than an individual, this value may not correctly reflect the name due to this automated formatting.\n"
        },
        {
          "name": "pat_guarantor_id",
          "description": "QDW patient ID in integer format of the person responsible for the patient's medical expenses.  May be used to link patients assumed to have a family relationship.  This is derived from the value in pat_orig_guarantor_id.\n"
        },
        {
          "name": "pat_insurance_1_id",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_insurance_2_id",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_insurance_3_id",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_original_id",
          "description": "ID of the patient row in the Staging database, used to tie back to the source system.  This is created by the connector query or direct feed that loads the row from a given source, and is derived from source system column(s) to uniquely identify a row. For a given source, one original ID corresponds to one and only one QDW ID for this entity.  The same original ID value could be found on more than one row if the rows are derived from different sources.\n"
        },
        {
          "name": "pat_first_name",
          "description": "Patient's first name.  Some sources append the member's middle initial to the end of the first name column.  This value is used in the Master Patient Index matching process.  Ideally, any middle initial should be moved to the pat_middle_name column so that the pat_first_name column can be more accurately used by the matching algorithm.\n"
        },
        {
          "name": "pat_last_name",
          "description": "Patient's last name.  This value is used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_middle_name",
          "description": "Patient's middle name or middle initial.\n"
        },
        {
          "name": "pat_race",
          "description": "Patient's race.  Valid values are 'White', 'Black or African American', 'American Indian or Alaska Native',  'Asian', 'Native Hawaiian or Other Pacific Islander', 'More than one race', 'Other' and 'Unreported/Refused to report' . This value is derived from the value in pat_race_unscrubbed, using mappings found in Staging table lookup.Race.\n"
        },
        {
          "name": "pat_ethnicity",
          "description": "Patient's ethnicity.  Valid values are 'Hispanic or Latino', 'Not Hispanic or Latino', 'Other' and 'Unreported/Refused to report'.  This value is derived from the value in pat_ethnicity_unscrubbed using mappings found in Staging table lookup.Ethnicity.\n"
        },
        {
          "name": "pat_occupation",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_status",
          "description": "Patient's status, e.g. 'Active' or 'Inactive'.  This value is used as a filter criterion in certain reports and extracts to include only active patients.  In many Arcadia client contracts, where billing is based on the number of active patients, it is also used when calculating the amount that Arcadia bills the client.  This value is derived from the value in pat_status_unscrubbed.\n"
        },
        {
          "name": "pat_language",
          "description": "Patient's primary  language, e.g. 'English', 'Chinese', or 'French'.  This value is derived from the value in pat_language_unscrubbed, using mappings found in Staging table lookup.Language.\n"
        },
        {
          "name": "pat_census",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_birth_country",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_income",
          "description": "Patient's annual income, in US dollars.\n"
        },
        {
          "name": "pat_education",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_family_size",
          "description": "Number of people in the patient's immediate family, including the patient.\n"
        },
        {
          "name": "pat_financial_class",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_city",
          "description": "City of the patient's residence.  This value may be used in the Master Patient Index matching process.\n",
          "data_tests": [
            {
              "column_values_are_in_uppercase": {
                "meta": {
                  "requirement": [
                    "FDR-2062"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "pat_county",
          "description": "County of the patient's residence.\n"
        },
        {
          "name": "pat_state",
          "description": "State of the patient's primary residence.\n",
          "data_tests": [
            {
              "column_values_are_in_uppercase": {
                "meta": {
                  "requirement": [
                    "FDR-2062"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "pat_zip",
          "description": "Zip code of the patient's primary residence.  May be 5-digit or ZIP+4.    The first 5 characters of this value may be used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_phone_1",
          "description": "Patient's phone number, as specified in the clinical data source.  This may be formatted either with or without hyphens and parentheses.\n"
        },
        {
          "name": "pat_phone_2",
          "description": "Patient's alternate phone number, as specified in the clinical data source. This may be formatted either with or without hyphens and parentheses.\n"
        },
        {
          "name": "pat_date_of_birth",
          "description": "Patient's date and time of birth.  The time information is typically all zeroes. This value is used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_sex",
          "description": "Patient's gender, e.g. 'M', 'F', 'O', or 'U'.   Valid values are 'M' (Male), 'F' (Female), 'O' (Other; used for transgender or other distinctions) and 'U' (Unknown).  This value may be used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_ssn",
          "description": "Patient's Social Security Number, specified as 9 digits, either with or without hyphens.  This value may be used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_marital_status",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_homelessness_status",
          "description": "Indicates if the patient is homeless and if so what their living arrangements are, e.g. 'Not Homeless', 'Shelter', or 'Street'.\n"
        },
        {
          "name": "pat_migrant_status",
          "description": "Patient's migrant status, e.g. 'Migrant', 'Seasonal', or 'Not a Farm Worker'.\n"
        },
        {
          "name": "pat_veteran_status",
          "description": "Indicates whether the patient is a veteran of the military, e.g. 'Y', 'N', or 'U'.\n"
        },
        {
          "name": "pat_email_address",
          "description": "Patient's email address.\n"
        },
        {
          "name": "pat_create_timestamp",
          "description": "Date and time when the record was first inserted into the clinical data source.\n"
        },
        {
          "name": "pat_modify_timestamp",
          "description": "Date and time when the record was last updated in the clinical data source.\n"
        },
        {
          "name": "pat_created_by",
          "description": "User who first inserted the row into the source system, as specified by a user ID known to the source system.  Is not currently populated but will be populated in a future enhancement.\n"
        },
        {
          "name": "pat_modified_by",
          "description": "User who most recently updated the row in the source system, as specified by a user ID known to the source system.  Is not currently populated but will be populated in a future enhancement.\n"
        },
        {
          "name": "pat_entry_timestamp",
          "description": "Date and time when the row was first inserted into the QDW.\n"
        },
        {
          "name": "pat_updated_timestamp",
          "description": "Date and time when the row was last updated in the QDW.\n"
        },
        {
          "name": "pat_delete_ind",
          "description": "Indicates if the record is marked as deleted, either because it was deleted in the clinical data source, or because the connector query changed in a way that makes the record no longer valid.  Values are 'Y' (deleted) and 'N' (not deleted).  If the value is 'Y' then the row should be excluded from all queries.\n"
        },
        {
          "name": "pat_orig_site_id",
          "description": "QDW site ID in integer format of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "pat_expired_ind",
          "description": "Indicates whether the patient has died.  Derived based on the presence of a non- null value in pat_death_date.  Values are 'Y' (patient is deceased) and 'N' (patient is alive).\n"
        },
        {
          "name": "demographics_completed",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_medical_record_number",
          "description": "Patient's medical record number (MRN) in the clinical data source. An MRN is typically used by only one patient within a given clinical data source. However, there are exceptions to this, and the same MRN value might be used on records for more than one patient.\n"
        },
        {
          "name": "pat_address_1",
          "description": "Street address of the patient's residence (line 1).\n"
        },
        {
          "name": "pat_address_2",
          "description": "Street address of the  patients residence (line 2).\n"
        },
        {
          "name": "pat_race_unscrubbed",
          "description": "Patient's race, as specified in the clinical data source.  This value is scrubbed into the pat_race column.\n"
        },
        {
          "name": "pat_ethnicity_unscrubbed",
          "description": "Patient's ethnicity, as specified in the clinical data source.  This value is scrubbed into the pat_ethnicity column.\n"
        },
        {
          "name": "pat_status_unscrubbed",
          "description": "Patient's status, as specified in the clinical data source.  This value is scrubbed into the pat_status column.\n"
        },
        {
          "name": "pat_language_unscrubbed",
          "description": "Patient's primary language, as specified in the clinical data source.  This value is scrubbed into the pat_language column.\n"
        },
        {
          "name": "pat_loaded_from_file",
          "description": "Name of the file from which this particular record was first loaded, usually a CSV file. When Arcadia pulls data from an EHR source via Informatica, we automatically embed the following pieces of information in this file name: date and time of the extract, client and source IDs, and connector query version. When data partners instead send us direct feeds that are loaded directly into staging (i.e. bypassing prestaging), the file name is created by the data partner and therefore may not contain the same type of information.\n"
        },
        {
          "name": "pat_guarantor_self_ind",
          "description": "Indicates if the patient is the guarantor.  Values are '1' (patient is the guarantor for him/herself) and '0' (the guarantor for this patient is someone else such as a spouse or parent).\n"
        },
        {
          "name": "pat_orig_guarantor_id",
          "description": "ID of the person responsible for the patient's medical expenses, as specified in the clinical data source.\n"
        },
        {
          "name": "pat_site_name",
          "description": "Name of the clinical data source from which this record was obtained.\n"
        },
        {
          "name": "pat_provider_id_unscrubbed",
          "description": "(This data element is not populated.)\n"
        },
        {
          "name": "pat_death_date",
          "description": "Patient's date and time of death.  The time information is typically all zeroes.\n"
        },
        {
          "name": "pat_alias",
          "description": "Alternate first name for the patient.  Is most often null.\n"
        },
        {
          "name": "pat_guarantor_relationship",
          "description": "Relationship of the patient to the guarantor, e.g. 'Self' (the patient is the same person as the guarantor) or 'Child' (the patient is the child of the guarantor).\n"
        },
        {
          "name": "pat_advance_directive_ind",
          "description": "Indicates if the patient has an advance directive, including living wills, Physician Orders for Life-Sustaining Treatment, power of attorney, Health Care Proxy.  Values are '1' (patient has one or more advance directive documents in place) and '0' (provider asked and determined that patient  has no advance directive documents in place).  A null value indicates that it is unknown whether the patient has an advance directive. Used for PCMH measures only.\n"
        },
        {
          "name": "pat_billing_account_id",
          "description": "Patient billing account ID number.  Is generally null.\n"
        },
        {
          "name": "pat_location_name",
          "description": "Name of the clinical location where the patient is usually seen.  This value is derived from the value in pat_usual_location_unscrubbed, using mappings found in Staging table lookup.Location.  If the unscrubbed value cannot be mapped to a location ID, then this is populated with the ID of the default location for that site. This is the name that is displayed in the front end.\n"
        },
        {
          "name": "pat_usual_location_unscrubbed",
          "description": "Name of the clinical location where the patient is usually seen, as specified in the clinical data source.  This value is scrubbed into the pat_usual_location_id column.\n"
        },
        {
          "name": "pat_opt_in_ind",
          "description": "Indicator that patient has opted-in to statewide data sharing such as a Health Information Exchange (HIE).  Values are 'Y' (patient has opted in) and 'N' (patient has not opted in).\n"
        },
        {
          "name": "pat_mail_address1",
          "description": "Street address (line 1) of the patient's mailing address.\n"
        },
        {
          "name": "pat_mail_address2",
          "description": "Street address (line 2) of the patient's mailing address.\n"
        },
        {
          "name": "pat_mail_city",
          "description": "City of the patient's mailing address.\n"
        },
        {
          "name": "pat_mail_state",
          "description": "State of the patient's mailing address.\n"
        },
        {
          "name": "pat_mail_zip",
          "description": "Zip code of the patient's mailing address.  May be 5-digit or ZIP+4.   For zip+4 values, the hyphen is usually included, but is not required.\n"
        },
        {
          "name": "pat_medicaid_id",
          "description": "Patient's Medicaid ID.  Most valid Medicaid IDs take the format of 9 numeric digits followed by two alpha characters.  This value may be used in the Master Patient Index matching process.\n"
        },
        {
          "name": "pat_destroy_ind",
          "description": "Indicates if the patient's data should be removed.  Patient data may be removed either because the patient has opted out of inclusion in analytics or for another reason.  Valid values are 0 (patient data should be kept) and 1 (patient data should be destroyed). If the value is 1, existing rows in clinical tables other than t_patient will be deleted and no new data will be loaded.  Also, the patient's row in t_patient will be marked as deleted, the pat_status set to 'destroyed', and all fields other than pat_id, pat_original_id, and pat_orig_site_id will be set to null.  The default value is 0.\n"
        },
        {
          "name": "pat_freeze_ind",
          "description": "Indicates if the patient's data has been frozen.  Valid values are 0 (not frozen) and 1 (frozen).  If the value is 1, the patient's existing data will not be changed, but no new data will be added nor will any updates be made.  The default value is 0.\n"
        }
      ]
    }
  ]
};
